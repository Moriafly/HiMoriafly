"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createWorkaroundPlugin = void 0;
/**
 * Workaround for https://github.com/vitejs/vite/issues/7621
 */
const createWorkaroundPlugin = () => {
    let server;
    return {
        name: 'vuepress:workaround',
        enforce: 'pre',
        configureServer(_server) {
            server = _server;
        },
        resolveId() {
            var _a;
            if ((_a = server === null || server === void 0 ? void 0 : server._optimizedDeps) === null || _a === void 0 ? void 0 : _a.metadata.browserHash) {
                server._optimizedDeps.metadata.hash = '';
                server._optimizedDeps.metadata.browserHash = '';
            }
            return null;
        },
    };
};
exports.createWorkaroundPlugin = createWorkaroundPlugin;
