"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createWorkaroundPlugin = void 0;
/**
 * Vite will inject version hash into file queries, which does not work
 * well with VuePress.
 *
 * As a workaround, we remove the version hash to avoid the injection.
 */
const createWorkaroundPlugin = () => {
    let server;
    return {
        name: 'vuepress:workaround',
        enforce: 'pre',
        configureServer(_server) {
            server = _server;
        },
        resolveId() {
            var _a;
            if ((_a = server === null || server === void 0 ? void 0 : server._optimizeDepsMetadata) === null || _a === void 0 ? void 0 : _a.browserHash) {
                server._optimizeDepsMetadata.browserHash = '';
            }
            return null;
        },
    };
};
exports.createWorkaroundPlugin = createWorkaroundPlugin;
