"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handlePageAdd = void 0;
const core_1 = require("@vuepress/core");
/**
 * Event handler for page add event
 *
 * Returns the added page
 */
const handlePageAdd = async (app, filePath) => {
    // check if the added page is duplicated
    const pageIndex = app.pages.findIndex((page) => page.filePath === filePath);
    if (pageIndex !== -1) {
        return null;
    }
    // create page
    const page = await (0, core_1.createPage)(app, {
        filePath,
    });
    // add the new page
    app.pages.push(page);
    // prepare page files
    await (0, core_1.preparePageComponent)(app, page);
    await (0, core_1.preparePageData)(app, page);
    // prepare pages entry
    await (0, core_1.preparePagesComponents)(app);
    await (0, core_1.preparePagesData)(app);
    await (0, core_1.preparePagesRoutes)(app);
    return page;
};
exports.handlePageAdd = handlePageAdd;
