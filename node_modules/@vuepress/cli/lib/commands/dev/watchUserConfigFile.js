"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.watchUserConfigFile = void 0;
const utils_1 = require("@vuepress/utils");
const chokidar = require("chokidar");
const watchUserConfigFile = ({ userConfigPath, userConfigDeps, restart, }) => {
    const cwd = process.cwd();
    const configWatcher = chokidar.watch(userConfigPath, {
        cwd,
        ignoreInitial: true,
    });
    configWatcher.on('change', (configFile) => {
        utils_1.logger.info(`config ${utils_1.chalk.magenta(configFile)} is modified`);
        restart();
    });
    const depsWatcher = chokidar.watch(userConfigDeps, {
        cwd,
        ignoreInitial: true,
    });
    depsWatcher.on('change', (depFile) => {
        utils_1.logger.info(`config dependency ${utils_1.chalk.magenta(depFile)} is modified`);
        restart();
    });
    return [configWatcher, depsWatcher];
};
exports.watchUserConfigFile = watchUserConfigFile;
