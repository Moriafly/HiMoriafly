"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveCliAppConfig = void 0;
const utils_1 = require("@vuepress/utils");
const OPTIONS_COMMON = ['debug', 'open', 'port', 'host'];
const OPTIONS_DIRECTORY = ['cache', 'dest', 'temp'];
/**
 * Resolve app config according to command options of cli
 */
const resolveCliAppConfig = (sourceDir, commandOptions, cwd = process.cwd()) => {
    // resolve the source directory
    const source = utils_1.path.resolve(cwd, sourceDir);
    const appConfig = {
        source,
    };
    // set app config from command options
    // notice that we do not want to override user config unless it is set explicitly via cli
    OPTIONS_COMMON.forEach((name) => {
        if (commandOptions[name] !== undefined) {
            // @ts-expect-error: the types could not be narrowed correctly
            appConfig[name] = commandOptions[name];
        }
    });
    OPTIONS_DIRECTORY.forEach((name) => {
        if (commandOptions[name] !== undefined) {
            appConfig[name] = utils_1.path.resolve(cwd, commandOptions[name]);
        }
    });
    return appConfig;
};
exports.resolveCliAppConfig = resolveCliAppConfig;
