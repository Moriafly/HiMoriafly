"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveThemeInfo = void 0;
const resolvePluginObject_1 = require("./resolvePluginObject");
const resolveThemeLayouts_1 = require("./resolveThemeLayouts");
/**
 * Resolve theme info and its parent theme info
 */
const resolveThemeInfo = (app, theme) => {
    var _a, _b, _c;
    // resolve current theme info
    const themeObject = (0, resolvePluginObject_1.resolvePluginObject)(app, theme);
    const themeInfo = {
        layouts: (0, resolveThemeLayouts_1.resolveThemeLayouts)(themeObject.layouts),
        plugins: [...((_a = themeObject.plugins) !== null && _a !== void 0 ? _a : []), themeObject],
        templateBuild: themeObject.templateBuild,
        templateDev: themeObject.templateDev,
    };
    // return if current theme does not have a parent theme
    if (!themeObject.extends) {
        return themeInfo;
    }
    // resolve parent theme info recursively
    const parentThemeInfo = (0, exports.resolveThemeInfo)(app, themeObject.extends);
    return {
        layouts: { ...parentThemeInfo.layouts, ...themeInfo.layouts },
        plugins: [...parentThemeInfo.plugins, ...themeInfo.plugins],
        templateBuild: (_b = themeObject.templateBuild) !== null && _b !== void 0 ? _b : parentThemeInfo.templateBuild,
        templateDev: (_c = themeObject.templateDev) !== null && _c !== void 0 ? _c : parentThemeInfo.templateDev,
    };
};
exports.resolveThemeInfo = resolveThemeInfo;
