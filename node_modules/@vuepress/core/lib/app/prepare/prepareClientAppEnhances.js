"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.prepareClientAppEnhances = void 0;
/**
 * Generate client app enhances temp file
 */
const prepareClientAppEnhances = async (app) => {
    // plugin hook: clientAppEnhanceFiles
    const clientAppEnhanceFiles = await app.pluginApi.hooks.clientAppEnhanceFiles.process(app);
    // flat the hook result to get the file paths array
    const filePaths = clientAppEnhanceFiles.flat();
    // generate client app enhance files entry
    const content = `\
${filePaths
        .map((filePath, index) => `import clientAppEnhance${index} from '${filePath}'`)
        .join('\n')}

export const clientAppEnhances = [
${filePaths.map((_, index) => `  clientAppEnhance${index},`).join('\n')}
]
`;
    await app.writeTemp('internal/clientAppEnhances.js', content);
};
exports.prepareClientAppEnhances = prepareClientAppEnhances;
