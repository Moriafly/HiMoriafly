"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.prepareSiteData = void 0;
const HMR_CODE = `
if (import.meta.webpackHot) {
  import.meta.webpackHot.accept()
  if (__VUE_HMR_RUNTIME__.updateSiteData) {
    __VUE_HMR_RUNTIME__.updateSiteData(siteData)
  }
}

if (import.meta.hot) {
  import.meta.hot.accept(({ siteData }) => {
    __VUE_HMR_RUNTIME__.updateSiteData(siteData)
  })
}
`;
/**
 * Generate site data temp file
 */
const prepareSiteData = async (app) => {
    let content = `\
export const siteData = ${JSON.stringify(app.siteData, null, 2)}
`;
    // inject HMR code
    if (app.env.isDev) {
        content += HMR_CODE;
    }
    await app.writeTemp('internal/siteData.js', content);
};
exports.prepareSiteData = prepareSiteData;
