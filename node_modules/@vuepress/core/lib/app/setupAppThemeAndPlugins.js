"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setupAppThemeAndPlugins = void 0;
const resolveThemeInfo_1 = require("./resolveThemeInfo");
/**
 * Setup theme and plugins for vuepress app
 */
const setupAppThemeAndPlugins = (app, config) => {
    var _a, _b, _c, _d;
    // recursively resolve theme info
    const themeInfo = (0, resolveThemeInfo_1.resolveThemeInfo)(app, app.options.theme);
    // set up app layouts and templates
    app.layouts = themeInfo.layouts;
    app.options.templateDev =
        (_b = (_a = config.templateDev) !== null && _a !== void 0 ? _a : themeInfo.templateDev) !== null && _b !== void 0 ? _b : app.options.templateDev;
    app.options.templateBuild =
        (_d = (_c = config.templateBuild) !== null && _c !== void 0 ? _c : themeInfo.templateBuild) !== null && _d !== void 0 ? _d : app.options.templateBuild;
    [...themeInfo.plugins, ...app.options.plugins]
        .flat()
        .forEach((plugin) => app.use(plugin));
};
exports.setupAppThemeAndPlugins = setupAppThemeAndPlugins;
