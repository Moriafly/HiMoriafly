"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.appInit = void 0;
const utils_1 = require("@vuepress/utils");
const resolveAppMarkdown_1 = require("./resolveAppMarkdown");
const resolveAppPages_1 = require("./resolveAppPages");
const log = (0, utils_1.debug)('vuepress:core/app');
/**
 * Initialize a vuepress app
 *
 * Plugins should be used before initialization.
 */
const appInit = async (app) => {
    log('init start');
    // register all hooks of plugins that have been used
    // plugins should be used before `registerHooks()`
    // hooks in plugins will take effect after `registerHooks()`
    app.pluginApi.registerHooks();
    // create markdown
    app.markdown = await (0, resolveAppMarkdown_1.resolveAppMarkdown)(app);
    // create pages
    app.pages = await (0, resolveAppPages_1.resolveAppPages)(app);
    // plugin hook: onInitialized
    await app.pluginApi.hooks.onInitialized.process(app);
    log('init finish');
};
exports.appInit = appInit;
