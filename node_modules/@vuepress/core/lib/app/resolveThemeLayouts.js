"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveThemeLayouts = void 0;
const shared_1 = require("@vuepress/shared");
const utils_1 = require("@vuepress/utils");
/**
 * Resolve layouts from `layouts` option
 */
const resolveThemeLayouts = (layouts = {}) => {
    // use the layouts component map directly
    if ((0, shared_1.isPlainObject)(layouts)) {
        return layouts;
    }
    // resolve the layouts directory
    if (!utils_1.fs.pathExistsSync(layouts)) {
        throw utils_1.logger.createError(`layouts directory does not exist: ${utils_1.chalk.magenta(layouts)}`);
    }
    // load all files in layouts directory, then take matched files
    // as theme layouts
    return Object.fromEntries(utils_1.fs
        .readdirSync(layouts)
        .filter((file) => /\.(vue|ts|js)$/.test(file))
        .map((file) => [utils_1.path.trimExt(file), utils_1.path.resolve(layouts, file)]));
};
exports.resolveThemeLayouts = resolveThemeLayouts;
