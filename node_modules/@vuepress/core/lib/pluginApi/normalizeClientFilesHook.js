"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.normalizeClientFilesHook = void 0;
const shared_1 = require("@vuepress/shared");
const utils_1 = require("@vuepress/utils");
/**
 * Normalize hook for client files
 */
const normalizeClientFilesHook = (hook) => async (app) => {
    // resolve clientFiles result
    const clientFilesResult = (0, shared_1.isFunction)(hook) ? await hook(app) : hook;
    const clientFiles = (0, shared_1.isArray)(clientFilesResult)
        ? clientFilesResult
        : [clientFilesResult];
    // filter files that do not exist
    const result = [];
    for (const filePath of clientFiles) {
        const isExisted = await utils_1.fs.pathExists(filePath);
        if (isExisted) {
            result.push(filePath);
        }
        else {
            throw utils_1.logger.createError(`client file does not exist: ${filePath}`);
        }
    }
    return result;
};
exports.normalizeClientFilesHook = normalizeClientFilesHook;
