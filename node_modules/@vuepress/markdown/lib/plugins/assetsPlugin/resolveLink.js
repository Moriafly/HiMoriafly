"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveLink = void 0;
const utils_1 = require("@vuepress/utils");
const mdurl_1 = require("mdurl");
const resolveLink = (link, relativePathPrefix, env) => {
    // decode link to ensure bundler can find the file correctly
    let resolvedLink = (0, mdurl_1.decode)(link);
    // if the link is relative path, and the `env.filePathRelative` exists
    // add `@source` alias to the link
    if (/^\.{1,2}\//.test(link) && env.filePathRelative) {
        resolvedLink = `${relativePathPrefix}/${utils_1.path.join(utils_1.path.dirname(env.filePathRelative), resolvedLink)}`;
    }
    return resolvedLink;
};
exports.resolveLink = resolveLink;
