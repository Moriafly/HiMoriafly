"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveWebpackConfig = void 0;
const webpack_merge_1 = require("webpack-merge");
const resolveWebpackConfig = ({ config, options, isServer, isBuild, }) => {
    var _a, _b;
    // allow modifying webpack config via `chainWebpack`
    (_a = options.chainWebpack) === null || _a === void 0 ? void 0 : _a.call(options, config, isServer, isBuild);
    // generate webpack config from webpack-chain
    const webpackConfig = config.toConfig();
    // allow modifying webpack config via `configureWebpack`
    const configureWebpackResult = (_b = options.configureWebpack) === null || _b === void 0 ? void 0 : _b.call(options, webpackConfig, isServer, isBuild);
    // if `configureWebpack` returns a configuration object,
    // use webpack-merge to merge it
    if (configureWebpackResult) {
        return (0, webpack_merge_1.merge)(webpackConfig, configureWebpackResult);
    }
    return webpackConfig;
};
exports.resolveWebpackConfig = resolveWebpackConfig;
