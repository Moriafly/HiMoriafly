"use strict";
module.exports = function vuepressLoader(source) {
    // get `request` from loader context
    const { request } = this;
    // add `request` to `ssrContext._registeredComponents` to handle SSR dependencies
    return source.replace('script.ssrRender = ssrRender', `\
import { ssrContextKey } from 'vue'
script.ssrRender = (...args) => {
  const ssrContext = args[2].appContext.provides[ssrContextKey]
  ssrContext._registeredComponents.add(${JSON.stringify(request)})
  return ssrRender(...args)
}
`);
};
